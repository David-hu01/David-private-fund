<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>大卫私人基金</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link rel="shortcut icon" href="favicon.ico" />
  <link rel="shortcut icon" href="favicon-96x96.png" type="image/png" />
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="https://www.dicapitalpartners.top/web-app-manifest-192x192.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="https://www.dicapitalpartners.top/web-app-manifest-512x512.png" />
  <link rel="manifest" href="site.webmanifest" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #f9fafb;
      min-height: 100vh;
    }

    /* 基金持仓组合卡片悬停动画 */
    .portfolio-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .portfolio-card:hover {
      transform: translateY(-8px) scale(1.05);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }
  </style>
</head>

<body class="flex flex-col min-h-screen">

  <!-- 顶部导航栏 -->
  <nav class="fixed top-0 left-0 right-0 bg-white shadow-md z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" class="flex items-center space-x-3">
          <img src="logo.png" alt="Logo" class="h-10 w-auto" />
          <span class="font-bold text-xl text-gray-900">大卫私人基金</span>
        </a>
        <div class="flex flex-nowrap space-x-2 sm:space-x-6 items-center justify-center">
          <a href="index.html" class="flex-1 min-w-0 font-medium group">
            <span
              class="block text-center text-xs sm:text-sm px-2 py-1 sm:px-4 sm:py-2 rounded truncate bg-blue-600 text-white transition-colors duration-150 group-hover:bg-blue-700">基金概览</span>
          </a>
          <a href="investment_framework_report.html" class="flex-1 font-medium group">
            <span
              class="block text-center text-xs sm:text-sm px-2 py-1 sm:px-4 sm:py-2 rounded whitespace-nowrap flex-shrink-0 bg-green-500 text-white transition-colors duration-150 group-hover:bg-green-600">
              未来动力新基金
            </span>
          </a>
          <a href="report.html" class="flex-1 min-w-0 font-medium group">
            <span
              class="block text-center text-xs sm:text-sm px-2 py-1 sm:px-4 sm:py-2 rounded truncate bg-orange-500 text-white transition-colors duration-150 group-hover:bg-orange-600">内部参考</span>
          </a>
          <a href="blog.html" class="flex-1 min-w-0 font-medium group">
            <span
              class="block text-center text-xs sm:text-sm px-2 py-1 sm:px-4 sm:py-2 rounded truncate bg-teal-500 text-white transition-colors duration-150 group-hover:bg-teal-600">Blog</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 页面主内容 -->
  <main class="flex-grow pt-20 w-full sm:max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- 头部信息 -->
    <header class="text-center mb-12">
      <h1 class="text-4xl font-extrabold text-gray-900 mb-2">大卫私人基金</h1>
      <p class="text-gray-700 text-lg leading-relaxed">
        本基金以AI、清洁能源等高成长产业为核心方向，专注长期价值投资，追求稳健回报。
      </p>
      <div class="flex justify-center mt-6 space-x-6">
        <a href="invest.html"
          class="bg-blue-800 text-white font-bold rounded-lg shadow px-4 py-3 sm:px-6 sm:py-4 text-center hover:bg-blue-900 transition w-full sm:w-40">
          投资我们
        </a>
        <a href="agreement.pdf"
          class="bg-green-600 text-white font-bold rounded-lg px-4 py-3 sm:px-6 sm:py-4 shadow text-center hover:bg-green-700 transition w-full sm:w-40">
          合伙协议
        </a>
      </div>
    </header>

    <!-- 核心指标卡片 -->
    <section class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-12">
      <div class="bg-white rounded-lg shadow p-6 text-center">
        <p class="text-gray-500 text-sm mb-1">最新净值</p>
        <p class="text-3xl font-semibold text-blue-700">35.36</p>
      </div>
      <div class="bg-white rounded-lg shadow p-6 text-center">
        <p class="text-gray-500 text-sm mb-1">年化收益率</p>
        <p id="cagr-value" class="text-3xl font-semibold text-green-600">%</p>
      </div>
      <div class="bg-white rounded-lg shadow p-6 text-center">
        <p class="text-gray-500 text-sm mb-1">成立时间</p>
        <p class="text-3xl font-semibold text-blue-700">2020-07-01</p>
      </div>
    </section>

    <!-- 净值走势图表 -->
    <section class="bg-white rounded-lg shadow p-6 mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">基金净值走势 & 持仓公司业绩增长</h2>
      <canvas id="navChart" class="w-full sm:max-w-4xl mx-auto"></canvas>
    </section>

    <!-- 基金持仓组合图表 -->
    <section class="bg-white rounded-lg shadow p-6 mb-12">
      <div class="text-center mb-4">
        <h2 class="text-2xl font-bold text-gray-900">基金持仓组合</h2>
        <p id="update-time" class="text-sm text-gray-500 mt-2">更新时间: 加载中...</p>
      </div>
      <div class="flex items-center justify-center">
        <div class="w-full sm:max-w-lg mx-auto" style="min-width: 350px;">
          <canvas id="portfolioChart"></canvas>
        </div>
      </div>
      <div class="mt-6 grid grid-cols-2 sm:grid-cols-5 gap-4 text-center">
        <div class="bg-blue-50 rounded-lg p-4">
          <p class="text-lg font-bold text-blue-700">NVDA</p>
          <p class="text-2xl font-semibold text-blue-900">50%</p>
        </div>
        <div class="bg-green-50 rounded-lg p-4">
          <p class="text-lg font-bold text-green-700">Gold</p>
          <p class="text-2xl font-semibold text-green-900">24%</p>
        </div>
        <div class="bg-orange-50 rounded-lg p-4">
          <p class="text-lg font-bold text-orange-700">AG</p>
          <p class="text-2xl font-semibold text-orange-900">13%</p>
        </div>
        <div class="bg-purple-50 rounded-lg p-4">
          <p class="text-lg font-bold text-purple-700">ALAB</p>
          <p class="text-2xl font-semibold text-purple-900">10%</p>
        </div>
        <div class="bg-gray-100 rounded-lg p-4">
          <p class="text-lg font-bold text-gray-700">现金</p>
          <p class="text-2xl font-semibold text-gray-900">3%</p>
        </div>
      </div>
    </section>

    <!-- 成功案例表格 -->
    <section class="bg-white rounded-lg shadow p-6 mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">成功案例</h2>
      <div class="-mx-4 px-4 sm:mx-0 overflow-x-auto">
        <table class="min-w-full table-auto divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                股票</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                持仓价格</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                退出价格</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">
                最终收益</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr>
              <td class="px-6 py-4 whitespace-nowrap font-semibold text-gray-900">BYD</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">32</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">100</td>
              <td class="px-6 py-4 whitespace-nowrap font-bold text-green-600">+312.5%</td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap font-semibold text-gray-900">TSLA</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">240</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">420</td>
              <td class="px-6 py-4 whitespace-nowrap font-bold text-green-600">+175%</td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap font-semibold text-gray-900">NVDA</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">167</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">2040</td>
              <td class="px-6 py-4 whitespace-nowrap font-bold text-green-600">+1221.6%</td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap font-semibold text-gray-900">云海金属</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">11</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">29</td>
              <td class="px-6 py-4 whitespace-nowrap font-bold text-green-600">+263%</td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap font-semibold text-gray-900">Gold</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">2300</td>
              <td class="px-6 py-4 whitespace-nowrap text-gray-900">3393</td>
              <td class="px-6 py-4 whitespace-nowrap font-bold text-green-600">+147%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>

  <!-- 页脚 -->
  <footer class="bg-white border-t border-gray-200 text-center py-6 text-gray-500 text-sm">
    投资有风险，入市需谨慎。<br />© 2025 大卫私人基金. All rights reserved.
  </footer>

  <script>
    const navValues = [1.0, 3.2, 6.72, 10.95, 19.16, 35.36];
    const ctx = document.getElementById('navChart').getContext('2d');

    // 从JSON文件加载持仓数据
    let portfolioData = {
      labels: ['NVDA', 'Gold', 'AG', 'ALAB', '现金'],
      data: [50, 24, 13, 10, 3],
      colors: [
        'rgba(37, 99, 235, 0.8)',
        'rgba(34, 197, 94, 0.8)',
        'rgba(249, 115, 22, 0.8)',
        'rgba(168, 85, 247, 0.8)',
        'rgba(107, 114, 128, 0.8)'
      ],
      borderColors: [
        'rgba(37, 99, 235, 1)',
        'rgba(34, 197, 94, 1)',
        'rgba(249, 115, 22, 1)',
        'rgba(168, 85, 247, 1)',
        'rgba(107, 114, 128, 1)'
      ]
    };

    // 异步加载持仓数据
    async function loadPortfolioData() {
      try {
        const response = await fetch('portfolio_data.json');
        const data = await response.json();

        if (data.portfolio && data.portfolio.length > 0) {
          portfolioData.labels = data.portfolio.map(p => p.ticker);
          portfolioData.data = data.portfolio.map(p => p.percentage);
          portfolioData.colors = data.portfolio.map(p => p.color);
          portfolioData.borderColors = data.portfolio.map(p => p.border_color);

          // 显示更新时间
          const updateTimeElement = document.getElementById('update-time');
          if (updateTimeElement && data.last_updated) {
            // 解析时间字符串并格式化
            const updateTime = new Date(data.last_updated.replace(/-/g, '/'));
            const formattedTime = updateTime.toLocaleString('zh-CN', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit'
            });
            updateTimeElement.textContent = `更新时间: ${formattedTime}`;
          }

          console.log('✅ 持仓数据加载成功 - 更新时间:', data.last_updated);
          console.log('账户净值: $' + data.account_value.toLocaleString());
        }
      } catch (error) {
        console.log('⚠️  无法加载portfolio_data.json，使用默认数据');
        console.log('运行 python update_portfolio.py 来更新数据');
      }
    }

    // 真实财务数据（来源：公司官方财报）
    // NVDA: https://investor.nvidia.com/financial-info/financial-reports/default.aspx
    const nvdaYoY = [null, null, 0.22, 125.9, 114.2, 59.7];  // 2020-2025 (2022-2025数据)

    // ALAB (Astera Labs): https://www.asteralabs.com/news/astera-labs-announces-financial-results-for-the-third-quarter-of-fiscal-year-2025/
    // 2022: ~$80M, 2023: ~$116M, 2024: $396.3M (YoY: 242%), 2025: 预期 $800M+
    const alabYoY = [null, null, null, 45.0, 242.0, 103.9];  // 2020-2025

    const navChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ["2020", "2021", "2022", "2023", "2024", "2025"],
        datasets: [
          {
            label: "基金净值",
            data: navValues,
            borderColor: "#2563eb",
            backgroundColor: "rgba(37, 99, 235, 0.1)",
            borderWidth: 3,
            fill: true,
            tension: 0.3,
            pointRadius: 5,
            pointHoverRadius: 7,
            pointBackgroundColor: "#2563eb",
            pointBorderColor: "#fff",
            pointHoverBorderWidth: 2,
            yAxisID: 'y'
          },
          {
            label: "NVDA 营收 YoY (%)",
            data: nvdaYoY,
            borderColor: "#10b981",
            backgroundColor: "rgba(16, 185, 129, 0.1)",
            borderWidth: 2,
            fill: false,
            tension: 0.3,
            pointRadius: 4,
            pointHoverRadius: 6,
            pointBackgroundColor: "#10b981",
            pointBorderColor: "#fff",
            pointHoverBorderWidth: 2,
            yAxisID: 'y1'
          },
          {
            label: "ALAB 营收 YoY (%)",
            data: alabYoY,
            borderColor: "#a855f7",
            backgroundColor: "rgba(168, 85, 247, 0.1)",
            borderWidth: 2,
            fill: false,
            tension: 0.3,
            pointRadius: 4,
            pointHoverRadius: 6,
            pointBackgroundColor: "#a855f7",
            pointBorderColor: "#fff",
            pointHoverBorderWidth: 2,
            yAxisID: 'y1'
          }
        ]
      },
      options: {
        responsive: true,
        interaction: {
          mode: 'index',
          intersect: false
        },
        plugins: {
          legend: {
            display: true,
            position: 'top',
            labels: {
              padding: 15,
              font: { size: 13 },
              usePointStyle: true
            }
          },
          tooltip: {
            enabled: true,
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(0, 0, 0, 0.8)',
            titleColor: '#fff',
            bodyColor: '#fff',
            cornerRadius: 6,
            padding: 12,
            callbacks: {
              label: function (context) {
                let label = context.dataset.label || '';
                if (label) {
                  label += ': ';
                }
                if (context.parsed.y !== null) {
                  if (context.dataset.yAxisID === 'y1') {
                    label += context.parsed.y.toFixed(2) + '%';
                  } else {
                    label += context.parsed.y.toFixed(2);
                  }
                } else {
                  label += 'N/A';
                }
                return label;
              }
            }
          }
        },
        scales: {
          y: {
            type: 'linear',
            display: true,
            position: 'left',
            beginAtZero: false,
            title: {
              display: true,
              text: '基金净值',
              color: '#2563eb',
              font: { size: 14, weight: 'bold' }
            },
            ticks: {
              color: '#4b5563',
              font: { size: 13 }
            },
            grid: {
              color: '#e5e7eb'
            }
          },
          y1: {
            type: 'linear',
            display: true,
            position: 'right',
            beginAtZero: true,
            title: {
              display: true,
              text: '营收同比增长 (%)',
              color: '#10b981',
              font: { size: 14, weight: 'bold' }
            },
            ticks: {
              color: '#4b5563',
              font: { size: 13 },
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              drawOnChartArea: false
            }
          },
          x: {
            ticks: {
              color: '#4b5563',
              font: { size: 14 }
            },
            grid: {
              display: false
            }
          }
        }
      }
    });

    // 计算年化收益率 (CAGR)
    const startValue = navValues[0];
    const endValue = navValues[navValues.length - 1];
    const years = 5;
    const cagr = (Math.pow(endValue / startValue, 1 / years) - 1) * 100;

    // 更新年化收益率显示
    const cagrElement = document.getElementById('cagr-value');
    cagrElement.textContent = cagr.toFixed(1) + '%';

    // 持仓分布饼图
    let portfolioChart;

    function createPortfolioChart() {
      const portfolioCtx = document.getElementById('portfolioChart').getContext('2d');

      portfolioChart = new Chart(portfolioCtx, {
        type: 'doughnut',
        data: {
          labels: portfolioData.labels,
          datasets: [{
            data: portfolioData.data,
            backgroundColor: portfolioData.colors,
            borderColor: portfolioData.borderColors,
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: true,
              position: 'bottom',
              labels: {
                padding: 12,
                boxWidth: 12,
                font: {
                  size: 13
                },
                usePointStyle: true
              }
            },
            tooltip: {
              enabled: true,
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              titleColor: '#fff',
              bodyColor: '#fff',
              padding: 12,
              cornerRadius: 6,
              callbacks: {
                label: function (context) {
                  return context.label + ': ' + context.parsed + '%';
                }
              }
            }
          }
        }
      });
    }

    // 更新持仓分布卡片显示
    function updatePortfolioCards() {
      const cardsContainer = document.querySelector('.mt-6.grid');
      if (!cardsContainer) return;

      cardsContainer.innerHTML = '';

      portfolioData.labels.forEach((label, index) => {
        const percentage = portfolioData.data[index];
        const color = portfolioData.colors[index];
        const borderColor = portfolioData.borderColors[index];

        // 将 rgba 颜色转换为更浅的背景色
        const bgColor = color.replace('0.8', '0.15');
        const textColor = borderColor.replace('1)', '0.9)');

        const card = document.createElement('div');
        card.className = 'portfolio-card rounded-lg p-4';
        card.style.backgroundColor = bgColor;
        card.style.border = `2px solid ${borderColor}`;

        card.innerHTML = `
          <p class="text-lg font-bold" style="color: ${textColor}">${label}</p>
          <p class="text-2xl font-semibold" style="color: ${textColor}">${percentage}%</p>
        `;

        cardsContainer.appendChild(card);
      });
    }

    // 初始化
    async function init() {
      await loadPortfolioData();
      createPortfolioChart();
      updatePortfolioCards();
    }

    // 页面加载时执行
    init();
  </script>

</body>

</html>